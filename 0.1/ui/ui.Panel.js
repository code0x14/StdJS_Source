Std.ui.module("Panel",{parent:"widget",events:"titleButtonClick",option:{defaultClass:"StdUI_Panel",level:4,width:300,height:200,minWidth:70,minHeight:50,title:"panel",menuBar:null,toolBar:null,titleIcon:null,titleIconClass:null,titleHeight:22,titleButtons:null,clientPadding:8,collapsible:!1,collapsed:!1},action:{content:"html",children:"append"},"private":{titleBar:null,menuBar:null,toolBar:null,client:null,central:null,titleButtons:null},extend:{render:function(){var t=this;t._menuBar&&t._menuBar.render(),t._toolBar&&t._toolBar.render(),t._central.render(),t.initEvents(),t.call_opts("collapsed",!0)},height:function(t){var n=this;n.updateHeight(t),n._central.emit("resize")},remove:function(){var t=this;t._central.remove(),t._menuBar&&t._menuBar.remove(),t._toolBar&&t._toolBar.remove()}},"protected":{titleButtonClick:function(t){var n=this,e=n.opts;return"collapse"===t&&n.collapsed(!e.collapsed,!0),n.emit("titleButtonClick",[t,n],!0)},initEvents:function(){var t=this,n=t.D,e=!1;return t[0].on({focusin:function(){t.addClass("focused")},focusout:function(){t.removeClass("focused")},mousedown:function(){t.focus()},mouseenter:function(){0==e&&(n.TitleBar.unselect(e=!0),t._toolBar&&t._toolBar[0].unselect(!0))}}),t},initTitleEvents:function(){var t=this,n=t.D;return n.TitleBar.on("mouseenter","._buttons > ._button",function(n){this.mouse({auto:!1,down:function(t){t.stopPropagation()},click:function(){var n=t._titleButtons;for(var e in n)n[e].contains(this)&&t.titleButtonClick(e)}},n)}),t},initTitle:function(){var t=this,n=t.opts,e=t.D;return e.TitleBar=newDiv("_title").outerHeight(n.titleHeight).append([e.TitleIcon=newDiv("_icon"),e.TitleText=newDiv("_text").html(n.title),e.TitleButtons=newDiv("_buttons")]).appendTo(t[0]),t},initBody:function(){var t=this;return t[0].append(t.D.body=newDiv("_body")),t},initClient:function(){var t=this,n=t.opts;return t.D.Client=newDiv("_client").append(t._central=Std.ui("widget",{defaultClass:"_central",appendTo:t[0],tabIndex:null})).appendTo(t.D.body),n.clientPadding&&t.D.Client.padding(n.clientPadding),t},updateHeight:function(t){var n=this,e=n.opts,i=(isNumber(t)?t:n.height())-n.boxSize.height-e.titleHeight;return e.clientPadding&&(i-=2*e.clientPadding),n._toolBar&&(i-=n._toolBar.height()),n._menuBar&&(i-=n._menuBar.height()),n.D.Client.height(i),n},createTitleButton:function(t,n){var e=this._titleButtons[t]=Std.is.DOM(n)?n:newDiv("_button").data(t,n);return isPlainObject(n)?e.set(n):isString(n)&&e.addClass(n),e}},"public":{title:function(t){return this.opt("title",t,function(){this.titleText(t)})},collapsible:function(t){var n=this;return n.opt("collapsible",t,function(){t===!0&&n.appendTitleButton("collapse","_collapse")})},clientPadding:function(t){return this.opt("clientPadding",t,function(){this.D.Client&&this.D.Client.padding(t)})},titleText:function(t){var n=this;return n.opt("text",t,function(){n.D.TitleText.html(t)})},titleIcon:function(t){var n=this,e=n.D;return n.opt("titleIcon",t,function(){e.TitleIconImg||(e.TitleIconImg=newDom("img").appendTo(e.TitleIcon)),e.TitleIconImg.attr("src",t)})},titleIconClass:function(t){var n=this,e=n.D;return n.opt("titleIcon",t,function(){e.TitleIcon.className("_icon "+t)})},url:function(t,n){var e=this;return void 0===t?e._central.url():(e._central.url(t,n),e)},html:function(t){var n=this;return void 0===t?n._central.html():(n._central.html(t),n)},iframe:function(t){var n=this;return void 0===t?n._central.iframe():(n._central.iframe(t),n)},layout:function(t){var n=this;return void 0===t?n._central.layout():(n._central.layout(t),n)},menuBar:function(t){var n=this;return void 0===t?n._menuBar||null:(isWidget(t)?n._menuBar=t:isObject(t)&&(n._menuBar=Std.ui("MenuBar",t)),n.D.body.prepend(n._menuBar),n.renderState&&(n._menuBar.render(),n.updateHeight()),n)},toolBar:function(t){var n=this;return void 0===t?n._toolBar||null:(isWidget(t)?n._toolBar=t:isObject(t)&&(n._toolBar=Std.ui("ToolBar",t)),n.D.body.insertBefore(n._toolBar,n.D.Client),n.renderState&&(n._toolBar.render(),n.updateHeight()),n)},collapsed:function(t,n){var e=this,i=function(){e.height(e.opts.height),e.D.body.removeStyle("height")},l=function(){e.D.body.css({zIndex:-1,position:"absolute",visibility:"hidden"})},o=function(t,n){e.D.body.animate("end").animate({to:{height:t}},150,n)};return e.opt("collapsed",t,function(){e.collapsible()&&(t===!0?(e[0].removeStyle("height"),n===!0?o(0,l):l()):(e.D.body.height(0).removeStyle(["visibility","position","zIndex"]),n===!0?o(e.height()-e.boxSize.height-e.opts.titleHeight,i):i()),e.titleButtons("collapse").toggleClass("_open",t))})},titleButtons:function(t,n){var e=this,i=e._titleButtons;return void 0===t?i:isString(t)&&void 0===n?i[t]:(e.appendTitleButton(t,n),e)},insertTitleButtonBefore:Std.func(function(t,n,e){var i=this,l=i.createTitleButton(t,n),o=i._titleButtons;null!==l&&e in o&&this.D.TitleButtons.insertBefore(o[e])},{each:[isArray]}),insertTitleButtonAfter:Std.func(function(t,n,e){var i=this,l=i.createTitleButton(t,n),o=i._titleButtons;null!==l&&e in o&&this.D.TitleButtons.insertAfter(o[e])},{each:[isArray]}),appendTitleButton:Std.func(function(t,n){var e=this,i=e.createTitleButton(t,n);null!==i&&this.D.TitleButtons.append(i)},{each:[isObject]})},main:function(t){t.D={},t._titleButtons={},t.initTitle(),t.initBody(),t.initClient(),t.initTitleEvents(),t.call_opts({menuBar:null,toolBar:null,titleIcon:null,titleIconClass:null,titleButtons:null,collapsible:!1},!0)}});