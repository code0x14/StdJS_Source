/**
    Std UI Kit Library
    http://ui.stdjs.com
	module: Notify
*/
Std.ui.module("Notify",{b:"widget",c:"click cellClick",e:{level:1,defaultClass:"StdUI_Notify",icon:!0,type:"information",theme:"default",title:"notify",text:"",side:"none",timeout:0,width:"auto",height:"auto",titleColor:null,textColor:null,closable:!0,cellWidth:16,cellHeight:16,cellSpacing:5},"private":{timer:null},f:{instances:[],close:function(t){var e=Std.ui.modules.Notify.instances;return void 0===t?Std.each(e,function(){e.close()}):t instanceof Std.ui("Notify")&&t.close(),this},show:function(t,e){e=Std.extend({overlap:!1,spacing:4,direction:"southeast",duration:400,offsetParent:null},e);var i=0,n=0,o=e.direction,r=Std.ui("Notify").instances,s=Std.dom(e.offsetParent)||Std.dom(window),l=0,c=0,a=0,u=function(r,s,u,d){var h=0,f=0,p=s.width(),m=s.height();"north"===o?(i=u+a,n=f=(l-p)/2,h=-m,a+=d?0:m+u):"northeast"===o?(i=u+a,n=f=l-p-u,h=-m,a+=d?0:m+u):"east"===o?(i=h=(c-m)/2,n=l-p-u-a,f=l,a+=d?0:p+u):"southeast"===o?(i=c-m-u-a,n=f=l-p-u,h=c,a+=d?0:m+u):"south"===o?(i=c-m-u-a,n=f=(l-p)/2,h=c,a+=d?0:m+u):"southwest"===o?(i=c-m-u-a,n=f=u,h=c,a+=d?0:m+u):"west"===o?(i=h=(c-m)/2,n=u+a,f=-p,a+=d?0:p+u):"northwest"===o&&(i=u+a,n=f=u,h=-m,a+=d?0:m+u),s===t&&s[0].css({top:h,left:f}),(s.left()!==n||s.top()!==i)&&s[0].animateTo({top:i,left:n},{duration:e.duration,timingFunction:"ease"})},d=function(){i=n=a=0,l=s.width(),c=s.height(),Std.each(r,function(t,i){var n=i._showOption;n&&n.offsetParent===e.offsetParent&&n.direction===e.direction&&u(t,i,n.spacing,n.overlap)})};return t._showOption=e,t[0].css({position:"fixed",zIndex:++Std.ui.status.zIndex}),r.push(t.on({destroy:function(){var e=r.indexOf(t);-1!==e&&r.remove(e),d()}}).renderTo("body")),d(),this},create:function(t,e,i,n){var o={type:t};isObject(e)?(Std.extend(o,e),isObject(i)&&(n=i)):isString(e)&&(o.text=e,isString(i)?o.title=i:isObject(i)&&(n=i));var r=Std.ui("Notify",o);return Std.ui("Notify").show(r,n),r},information:function(t,e,i){return this.create("information",t,e,i)},warning:function(t,e,i){return this.create("warning",t,e,i)},success:function(t,e,i){return this.create("success",t,e,i)},error:function(t,e,i){return this.create("error",t,e,i)},question:function(t,e,i){return this.create("question",t,e,i)}},g:{render:function(){var t=this,e=t.opts;e.timeout&&t.timeout(e.timeout),t.initEvents()},width:function(t){var e=this;"auto"!==t&&(isNumber(t)||(t=e.width()),this.DOMMap.mainTable.width(t-=this.boxSize.width+this.boxSize.extraWidth))},destroy:function(){var t=this;t._timer&&(clearTimeout(t._timer),t._timer=null)}},i:{initIcon:function(){this.DOMMap.iconTD.append(this.DOMMap.icon=newDiv("_icon _default"))},initEvents:function(){var t=this;t[0].focussing(function(){t.addClass("focused")},function(){t.removeClass("focused")}).mouse({click:function(e){t.emit("click",e)}})},initDOMTree:function(){var t=this,e=t.DOMMap={};e.mainTable=newDom("table","_mainTable").append(e.mainTbody=newDom("tbody").append([e.tr1=newDom("tr").append([e.iconTD=newDom("td","_icon").attr("rowspan",2),e.titleTD=newDom("td","_title")]),e.tr2=newDom("tr").append([e.textTD=newDom("td","_text")])])).appendTo(t[0])}},j:{text:function(t){return this.opt("text",t,function(){this.DOMMap.textTD.html(t),this.rendered&&this.repaint()})},title:function(t){return this.opt("title",t,function(){this.DOMMap.titleTD.html(t),this.rendered&&this.repaint()})},icon:function(t){return this.opt("icon",t,function(){Std.icon.update(this.DOMMap.icon.removeClass("_default"),t),this.rendered&&this.repaint()})},type:function(t){var e=this,i=e.opts;return void 0===t?i.type:e.removeClass("-"+i.type).addClass("-"+(i.type=t))},titleColor:function(t){var e=this,i=e.DOMMap;return void 0===t?i.titleTD.color():(i.titleTD.color(e.opts.titleColor=t),e)},textColor:function(t){var e=this,i=e.DOMMap;return void 0===t?i.textTD.color():(i.textTD.color(e.opts.textColor=t),e)},closable:function(t){var e=this;return e.opt("closable",t,function(){t?e.addCell("close",newDiv("_cell _close"),function(){e.remove()}):e.removeCell("close")})},timeout:function(t){var e=this;return this.opt("timeout",t,function(){e._timer&&clearTimeout(e._timer),e._timer=setTimeout(function(){e.destroy(),e._timer=null},Std.convert.timeUnit(t,"ms"))})},repaint:function(){var t=this,e=t.opts,i=t.DOMMap;isNumber(e.width)&&t[0].removeStyle("width"),i.mainTable.removeStyle("width"),t.resize("width")},cells:function(t){var e=this;return e._cells||(e._cells={}),void 0===t?e._cells:isString(t)?e._cells[t]||null:e},addCell:Std.func(function(t,e,i){var n=this,o=n.opts,r=e;n._cells||(n._cells={}),t in n._cells||(Std.is.DOM(e)||(e=Std.icon.update(r=newDiv("_cell"),e,{width:null,height:null})),r.mouse({click:function(o){n.emit("cellClick",{name:t,cell:r,data:e}),isFunction(i)&&i.call(r,o)}}),n._cells[t]=newDom("td","_cell").append(r).css({width:o.cellWidth,height:o.cellHeight,paddingLeft:o.cellSpacing}).appendTo(n.DOMMap.tr1))},{each:[isObject,isArray]}),removeCell:Std.func(function(t){var e=this,i=e.opts.width,n=e._cells;n&&n[t]&&(n[t].remove(),delete n[t],e.rendered&&isNumber(i)&&e.width(i))},{each:[isArray,isString]})},k:function(t,e,i){i.addClass("_"+e.type),t.initDOMTree(),t.call_opts({text:"",title:"",closable:!1,titleColor:null,textColor:null},!0),e.icon!==!1&&t.initIcon(),isBool(e.icon)||t.icon(e.icon)},support:{rule:{content:"text"},html:{nodeName:["DIV"],create:function(t){var e=t.attr("title");null!==e&&this.title(e),this.text(t.trimHTML())}}}});