/**
 Std UI Kit Library
 http://ui.stdjs.com
 module: Panel
 */
Std.ui.module("Panel",{b:"widget",c:"titleButtonClick beforeClose close",e:{defaultClass:"StdUI_Panel",level:4,minWidth:70,minHeight:50,title:"panel",theme:"default",menuBar:null,toolBar:null,titleIcon:null,titleHeight:26,titleButtons:null,titleBarVisible:!0,clientPadding:8,collapsible:!1,collapsed:!1,closable:!1,closeMethod:"remove",boxShadow:!0,centralClass:"",overflow:"auto"},h:{titleBar:null,menuBar:null,toolBar:null,client:null,central:null,titleButtons:null},n:{initEvents:function(){var t=this,e=!1,i=t.DOMMap;t[0].on({focusin:function(){t.enable()&&t.addClass("focused")},focusout:function(){t.removeClass("focused")},mousedown:function(){t.focus()},mouseenter:function(){0==e&&(i.titleBar.unselect(e=!0),t._toolBar&&t._toolBar[0].unselect(!0))}})},initTitleEvents:function(){var t=this,e=t.DOMMap;e.titleBar.on("mouseenter","> ._buttons > ._button",function(e){this.mouse({auto:!1,down:function(t){t.stopPropagation()},click:function(){var e=t._titleButtons;for(var i in e)e[i].contains(this)&&t.enable()&&t.titleButtonClick(i)}},e)})},initTitle:function(){var t=this,e=t.opts,i=t.DOMMap;i.titleBar=newDiv("_title").outerHeight(e.titleHeight).append([i.titleText=newDiv("_text").lineHeight(e.titleHeight).html(e.title),i.titleButtons=newDiv("_buttons")]).appendTo(t[0]),e.titleBarVisible||i.titleBar.hide()},initBody:function(){var t=this;t[0].append(t.DOMMap.body=newDiv("_body"))},initClient:function(){var t=this,e=t.opts,i=t.DOMMap;i.client=newDiv("_client").append(t._central=Std.ui("widget",{defaultClass:"_central",className:e.centralClass,appendTo:t[0],tabIndex:null,initBoxSize:!1,initSize:!1,css:{overflow:e.overflow},on:{load:function(e){t.emit("load",e)}}})).appendTo(i.body),e.clientPadding&&i.client.padding(e.clientPadding)}},g:{beforeRender:function(){var t=this;t._menuBar&&t._menuBar.render(),t._toolBar&&t._toolBar.render(),t._central.render()},render:function(){var t=this;t.initEvents(),t.call_opts({collapsed:!1},!0)},enable:function(t){var e=this;e._menuBar&&e._menuBar.enable(t),e._toolBar&&e._toolBar.enable(t),e._central&&e._central.enable(t),e[0].unselect(!t)},width:function(t){{var e=this;e.opts}e.rendered&&"auto"!==t&&e.__final__("width",function(){e._central.emit("resize")})},height:function(t){if("auto"!==t){var e=this,i=e.opts,n=e.boxSize,l=-(n.height+n.extraHeight);l+=isNumber(t)?t:e.height(),i.titleBarVisible&&(l-=i.titleHeight),i.clientPadding&&(l-=2*i.clientPadding),e._toolBar&&(l-=e._toolBar.height()),e._menuBar&&(l-=e._menuBar.height()),Std.init.css.boxSizing||e._central[0].outerHeight(l),e.DOMMap.client.height(l),e.__final__("height",function(){e._central.emit("resize")})}},destroy:function(){var t=this;t._menuBar&&t._menuBar.remove(),t._toolBar&&t._toolBar.remove(),t._central.destroy()}},i:{titleButtonClick:function(t){var e=this,i=e.opts;return"collapse"===t?e.collapsed(!i.collapsed,!0):"close"===t&&e.close(),e.emit("titleButtonClick",[t,e],!0)},createTitleButton:function(t,e){var i=null,n=this._titleButtons;return t in n?i:(n[t]=i=Std.is.DOM(e)?e:newDiv("_button").data(t,e),isPlainObject(e)?i.set(e):isString(e)&&i.addClass(e),i)}},j:{title:function(t){return this.opt("title",t,function(){this.titleText(t)})},collapsible:function(t){var e=this,i=e._titleButtons;return e.opt("collapsible",t,function(){t!==!0||i.collapse?e.titleButtons("collapse").visible(t):e.insertTitleButton("collapse","_collapse",0)})},closable:function(t){var e=this,i=e._titleButtons;return e.opt("closable",t,function(){t!==!0||i.close?e.titleButtons("close").visible(t):e.appendTitleButton("close","_close")})},close:function(){var t=this,e=t.opts.closeMethod;return t.emit("beforeClose").animation("close",function(){isFunction(e)?e.call(t):isString(e)&&e in t&&t[e](),t.emit("close")},e),t},clientPadding:function(t){return this.opt("clientPadding",t,function(){this.DOMMap.client&&this.DOMMap.client.padding(t)})},titleText:function(t){var e=this;return e.opt("text",t,function(){e.DOMMap.titleText.html(t)})},titleIcon:function(t){var e=this,i=e.DOMMap;return e.opt("titleIcon",t,function(){i.titleIcon||(i.titleIcon=newDiv("_icon").prependTo(i.titleBar)),Std.icon.update(i.titleIcon,t,{width:null,height:null})})},titleBarVisible:function(t){var e=this,i=e.DOMMap;return e.opt("titleBarVisible",t,function(){i.titleBar.visible(t),e.resize("height")})},boxShadow:function(t){var e=this;return e.opt("boxShadow",t,function(){t===!1?e[0].css("boxShadow","none"):t===!0?e[0].removeStyle("boxShadow"):isString(t)&&e[0].css("boxShadow",t)})},url:function(t,e){var i=this;return void 0===t?i._central.url():(i._central.url(t,e),i)},html:function(t){var e=this;return void 0===t?e._central.html():(e._central.html(t),e)},iframe:function(t){var e=this;return void 0===t?e._central.iframe():(e._central.iframe(t),setTimeout(function(){e._central[0].children("iframe")[0].css("float","left")},1),e)},layout:function(t){var e=this;return void 0===t?e._central.layout():(e._central.layout(t),e)},menuBar:function(t){var e=this;return void 0===t?e._menuBar||null:(isWidget(t)?e._menuBar=t:isObject(t)&&(e._menuBar=Std.ui("MenuBar",t)),e.DOMMap.body.prepend(e._menuBar.parent(e)),e.rendered&&(e._menuBar.render(),e.resize("height")),e)},toolBar:function(t){var e=this;return void 0===t?e._toolBar||null:(isWidget(t)?e._toolBar=t:isObject(t)&&(e._toolBar=Std.ui("ToolBar",t)),e.DOMMap.body.insertBefore(e._toolBar.parent(e),e.DOMMap.client),e.rendered&&(e._toolBar.render(),e.resize("height")),e)},collapsed:function(t,e){var i=this,n=i.opts;return i.opt("collapsed",t,function(){i.collapsible()&&(t===!0?(i[0].data("latestHeight",i[0].height()),e?i[0].animateTo({height:n.titleHeight},200):i[0].height(n.titleHeight)):e?i[0].animateTo({height:i[0].data("latestHeight")},200,function(){i.resize("height")}):i.resize("height"),i.titleButtons("collapse").toggleClass("_open",t))})},titleButtons:function(t,e){var i=this,n=i._titleButtons;return void 0===t?n:isString(t)&&void 0===e?n[t]:(i.appendTitleButton(t,e),i)},insertTitleButton:function(t,e,i){var n=this,l=n.createTitleButton(t,e);return null===l?l:("number"!=typeof i&&(i=-1),n.DOMMap.titleButtons.insert(l,i),n)},insertTitleButtonBefore:Std.func(function(t,e,i){var n=this,l=n.createTitleButton(t,e),o=n._titleButtons;null!==l&&i in o&&n.DOMMap.titleButtons.insertBefore(l,o[i])},{each:[isArray]}),insertTitleButtonAfter:Std.func(function(t,e,i){var n=this,l=n.createTitleButton(t,e),o=n._titleButtons;null!==l&&i in o&&n.DOMMap.titleButtons.insertAfter(l,o[i])},{each:[isArray]}),appendTitleButton:Std.func(function(t,e){var i=this,n=i.createTitleButton(t,e);null!==n&&this.DOMMap.titleButtons.append(n)},{each:[isObject]}),removeTitleButton:Std.func(function(t){var e=this,i=e._titleButtons;isObject(i[t])&&(i[t].remove(),delete i[t])},{each:[isArray,isString]})},k:function(t){t.DOMMap={},t._titleButtons={},t.initTitle(),t.initBody(),t.initClient(),t.initTitleEvents(),t.call_opts({menuBar:null,toolBar:null,titleIcon:null,titleButtons:null,collapsible:!1,closable:!1,boxShadow:!0},!0)},m:{rule:{content:"html",children:function(t){isArray(t)&&t.length>0&&t[0]instanceof Std_ui("layout")&&this.layout(t[0])}},html:{nodeName:["DIV"],create:function(t){var e=null,i=t.html(),n=t.attr("std-content");if(n&&"html"!==n){if("iframe"==n)this.iframe(i.trim());else if("url"==n)this.url(i.trim());else if("layout"==n&&(e=t.children(0))&&Std_ui(e.attr("std-ui"))){var l=Std_ui.build(e,!1);if(l instanceof Std_ui("layout"))return this.layout(l);l.destroy()}}else this.html(i)}}}});