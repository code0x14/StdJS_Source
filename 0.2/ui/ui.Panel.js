/**
    Std UI Kit Library
    http://ui.stdjs.com
	module: Panel
*/
Std.ui.module("Panel",{b:"widget",c:"titleButtonClick",e:{defaultClass:"StdUI_Panel",level:4,minWidth:70,minHeight:50,title:"panel",theme:"default",menuBar:null,toolBar:null,titleIcon:null,titleHeight:26,titleButtons:null,titleBarVisible:!0,clientPadding:8,collapsible:!1,collapsed:!1,boxShadow:!0,centralClass:"",overflow:"auto"},h:{titleBar:null,menuBar:null,toolBar:null,client:null,central:null,titleButtons:null},n:{initEvents:function(){var t=this,e=!1,i=t.DOMMap;t[0].on({focusin:function(){t.enable()&&t.addClass("focused")},focusout:function(){t.removeClass("focused")},mousedown:function(){t.focus()},mouseenter:function(){0==e&&(i.TitleBar.unselect(e=!0),t._toolBar&&t._toolBar[0].unselect(!0))}})},initTitleEvents:function(){var t=this,e=t.DOMMap;e.TitleBar.on("mouseenter","._buttons > ._button",function(e){this.mouse({auto:!1,down:function(t){t.stopPropagation()},click:function(){var e=t._titleButtons;for(var i in e)e[i].contains(this)&&t.enable()&&t.titleButtonClick(i)}},e)})},initTitle:function(){var t=this,e=t.opts,i=t.DOMMap;i.TitleBar=newDiv("_title").outerHeight(e.titleHeight).append([i.TitleText=newDiv("_text").html(e.title),i.TitleButtons=newDiv("_buttons")]).appendTo(t[0]),e.titleBarVisible||i.TitleBar.hide()},initBody:function(){var t=this;t[0].append(t.DOMMap.body=newDiv("_body"))},initClient:function(){var t=this,e=t.opts,i=t.DOMMap;i.Client=newDiv("_client").append(t._central=Std.ui("widget",{defaultClass:"_central",className:e.centralClass,appendTo:t[0],tabIndex:null,initBoxSize:!1,initSize:!1,css:{overflow:e.overflow},on:{load:function(e){t.emit("load",e)}}})).appendTo(i.body),e.clientPadding&&i.Client.padding(e.clientPadding)}},g:{beforeRender:function(){var t=this;t._menuBar&&t._menuBar.render(),t._toolBar&&t._toolBar.render(),t._central.render()},render:function(){var t=this;t.initEvents(),t.call_opts({collapsed:!1},!0)},enable:function(t){var e=this;e._menuBar&&e._menuBar.enable(t),e._toolBar&&e._toolBar.enable(t),e._central&&e._central.enable(t),e[0].unselect(!t)},height:function(t){var e=this;e.updateHeight(t),e._central.emit("resize")},destroy:function(){var t=this;t._central.remove(),t._menuBar&&t._menuBar.remove(),t._toolBar&&t._toolBar.remove()}},i:{titleButtonClick:function(t){var e=this,i=e.opts;return"collapse"===t&&e.collapsed(!i.collapsed,!0),e.emit("titleButtonClick",[t,e],!0)},updateHeight:function(t){var e=this,i=e.opts,n=(isNumber(t)?t:e.height())-e.boxSize.height-e.boxSize.extraHeight-(i.titleBarVisible?i.titleHeight:0);return i.clientPadding&&(n-=2*i.clientPadding),e._toolBar&&(n-=e._toolBar.height()),e._menuBar&&(n-=e._menuBar.height()),isNumber(t)&&isNumber(i.height)&&e.DOMMap.Client.height(n),e},createTitleButton:function(t,e){var i=this._titleButtons[t]=Std.is.DOM(e)?e:newDiv("_button").data(t,e);return isPlainObject(e)?i.set(e):isString(e)&&i.addClass(e),i}},j:{title:function(t){return this.opt("title",t,function(){this.titleText(t)})},collapsible:function(t){var e=this;return e.opt("collapsible",t,function(){t===!0&&e.appendTitleButton("collapse","_collapse")})},clientPadding:function(t){return this.opt("clientPadding",t,function(){this.DOMMap.Client&&this.DOMMap.Client.padding(t)})},titleText:function(t){var e=this;return e.opt("text",t,function(){e.DOMMap.TitleText.html(t)})},titleIcon:function(t){var e=this,i=e.DOMMap;return e.opt("titleIcon",t,function(){i.TitleIcon||(i.TitleIcon=newDiv("_icon").prependTo(i.TitleBar)),Std.icon.update(i.TitleIcon,t,{width:null,height:null})})},titleBarVisible:function(t){var e=this,i=e.DOMMap;return e.opt("titleBarVisible",t,function(){i.TitleBar.visible(t),e.updateHeight()})},boxShadow:function(t){var e=this;return e.opt("boxShadow",t,function(){t===!1?e[0].css("boxShadow","none"):t===!0?e[0].removeStyle("boxShadow"):isString(t)&&e[0].css("boxShadow",t)})},url:function(t,e){var i=this;return void 0===t?i._central.url():(i._central.url(t,e),i)},html:function(t){var e=this;return void 0===t?e._central.html():(e._central.html(t),e)},iframe:function(t){var e=this;return void 0===t?e._central.iframe():(e._central.iframe(t),setTimeout(function(){e._central[0].children("iframe")[0].css("float","left")},1),e)},layout:function(t){var e=this;return void 0===t?e._central.layout():(e._central.layout(t),e)},menuBar:function(t){var e=this;return void 0===t?e._menuBar||null:(isWidget(t)?e._menuBar=t:isObject(t)&&(e._menuBar=Std.ui("MenuBar",t)),e.DOMMap.body.prepend(e._menuBar.parent(e)),e.rendered&&(e._menuBar.render(),e.updateHeight()),e)},toolBar:function(t){var e=this;return void 0===t?e._toolBar||null:(isWidget(t)?e._toolBar=t:isObject(t)&&(e._toolBar=Std.ui("ToolBar",t)),e.DOMMap.body.insertBefore(e._toolBar.parent(e),e.DOMMap.Client),e.rendered&&(e._toolBar.render(),e.updateHeight()),e)},collapsed:function(t,e){var i=this,n=i.DOMMap,l=function(){i.height(i.opts.height),n.body.removeStyle("height")},o=function(){n.body.css({zIndex:-1,position:"absolute",visibility:"hidden"})},a=function(t,e){n.body.animateTo({height:t},150,e)};return i.opt("collapsed",t,function(){if(i.collapsible()){if(t===!0)i[0].removeStyle("height"),e===!0?a(0,o):o();else{n.body.removeStyle(["visibility","position","zIndex","height"]);var r=n.body.height();n.body.height(0),e===!0?a(r,function(){n.body.removeStyle("height")}):l()}i.titleButtons("collapse").toggleClass("_open",t)}})},titleButtons:function(t,e){var i=this,n=i._titleButtons;return void 0===t?n:isString(t)&&void 0===e?n[t]:(i.appendTitleButton(t,e),i)},insertTitleButtonBefore:Std.func(function(t,e,i){var n=this,l=n.createTitleButton(t,e),o=n._titleButtons;null!==l&&i in o&&this.DOMMap.TitleButtons.insertBefore(o[i])},{each:[isArray]}),insertTitleButtonAfter:Std.func(function(t,e,i){var n=this,l=n.createTitleButton(t,e),o=n._titleButtons;null!==l&&i in o&&this.DOMMap.TitleButtons.insertAfter(o[i])},{each:[isArray]}),appendTitleButton:Std.func(function(t,e){var i=this,n=i.createTitleButton(t,e);null!==n&&this.DOMMap.TitleButtons.append(n)},{each:[isObject]})},k:function(t){t.DOMMap={},t._titleButtons={},t.initTitle(),t.initBody(),t.initClient(),t.initTitleEvents(),t.call_opts({menuBar:null,toolBar:null,titleIcon:null,titleButtons:null,collapsible:!1,boxShadow:!0},!0)},m:{rule:{content:"html",children:function(t){isArray(t)&&t.length>0&&t[0]instanceof Std_ui("layout")&&this.layout(t[0])}},html:{nodeName:["DIV"],create:function(t){var e=t.html(),i=t.attr("std-content");if(i&&"html"!==i){if("iframe"==i)this.iframe(e.trim());else if("url"==i)this.url(e.trim());else if("layout"==i&&children&&children.length>0){var n=t.children(0);if(n&&Std_ui(n.attr("std-ui"))){var l=Std_ui.build(n,!1);if(l instanceof Std_ui("layout"))return this.layout(l);l.destroy()}}}else this.html(e)}}}});