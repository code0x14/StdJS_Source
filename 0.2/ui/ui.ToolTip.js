/**
    Std UI Kit Library
    http://ui.stdjs.com
	module: ToolTip
	plugin: ToolTip
*/
Std.ui.module("ToolTip",{parent:"widget",events:"sideChange",option:{level:2,defaultClass:"StdUI_ToolTip",boxShadow:!0,value:null,renderTo:"",arrow:!0,arrowOffset:10,side:"top-center",theme:"default",iframe:null,html:null,url:null,width:"auto",height:"auto",selector:null,tabIndex:null,contentPadding:12},extend:{render:function(){var t=this;t[1].on("load",function(e){t.relocate(),t.emit("load",e)}),t.call_opts({selector:null,boxShadow:!0},!0),t.call_opts(["contentPadding"])},beforeRender:function(){var t=this,e=t.contentPadding();t[1].render(),Std.each(["paddingTop","paddingRight","paddingBottom","paddingLeft"],function(i,o){t[1].boxSize[o]=e})}},"protected":{relocate:function(){var t=this,e=t.side().split("-"),i=t[2].removeStyle("left top").width(),o=t[2].height(),n=e[0],r=e[1],a=0,s=0,u=t.opts.arrowOffset;return"top"==n||"bottom"==n?("left"==r?s=u:"center"==r?s=(t.width()-i)/2:"right"==r&&(s=t.width()-i-u),t[2].css("left",s)):("left"==n||"right"==n)&&("top"==r?a=u:"center"==r?a=(t.height()-o)/2:"bottom"==r&&(a=t.height()-o-u),t[2].css("top",a)),t}},"public":{target:function(t){return this.opt("target",t)},arrowWidth:function(){return this.opts.arrow?this[2].width():0},arrowHeight:function(){return this.opts.arrow?this[2].height():0},contentPadding:function(t){var e=this;return this.opt("contentPadding",t,function(){e.rendered&&(Std.each(["paddingTop","paddingRight","paddingBottom","paddingLeft"],function(i,o){e[1].boxSize[o]=t}),e[1]&&e[1][0].css("padding",t),e[1].updateLayout(),e.relocate())})},boxShadow:function(t){return this.opt("boxShadow",t,function(){t===!1?this[1].css("boxShadow","none"):t===!0?this[1].removeStyle("boxShadow"):isString(t)&&this[1].css("boxShadow",t)})},iframe:function(t){var e=this;return e.opt("iframe",t,function(){e[1].iframe(t)})},html:function(t){var e=this;return e.opt("html",t,function(){e[1].html(t)})},layout:function(t){var e=this;return void 0===t?e[1].layout():(e[1].layout(t),e)},selector:function(t){var e=this;return e.opt("selector",t,function(){var i=Std.dom(t);null!==i&&e[1].html(i.html())})},url:function(t){var e=this;return e.opt("url",t,function(){var i=newDiv("_loading");e[1].html(i),i.css("marginTop",(e[1].height()-i.height())/2),e.relocate(),"black"===e.opts.theme&&i.addClass("__white__"),Std.ajax.get(t,function(t){e.html(t)})})},side:function(t){var e=this,i=e.opts;return e.opt("side",t,function(){e[1].className("_client _"+t.split("-")[0]),e[2].className("_arrow _"+t.split("-")[0]),i.theme&&(e[1].addClass("__"+i.theme+"__"),e[2].addClass("__"+i.theme+"__")),e.rendered&&(e.relocate(),e.emit("sideChange",t))})},height:function(t){var e=this,i=e.opts,o=i.contentPadding,n=e.boxSize.height+e.boxSize.extraHeight+2,r=n+2*o+2;switch(i.side.split("-")[0]){case"left":case"right":if(void 0===t)return e[1].height()+n+2*o;isNumber(t)&&(r>t&&(t=r),e[1].height(t-n-2*o)),e.relocate();break;case"top":case"bottom":var a=i.arrow?e[2].height()-1:0;if(void 0===t)return e[1].height()+n+a+2*o;isNumber(t)&&(r+a>t&&(t=r+a),e[1].height(t-n-a-2*o))}return e[1].updateLayout(),i.height=t,e.__final__("height",function(i){e.emit("resize",{type:i,height:t})})},width:function(t){var e=this,i=e.opts,o=i.contentPadding,n=e.boxSize.width+e.boxSize.extraWidth+2,r=n+2*o+2;switch(i.side.split("-")[0]){case"left":case"right":var a=i.arrow?e[2].width()-1:0;if(void 0===t)return e[1].width()+n+a+2*o;isNumber(t)&&(r+a>t&&(t=r+a),e[1].width(t-n-a-2*o));break;case"top":case"bottom":if(void 0===t)return e[1].width()+n+2*o;isNumber(t)&&(r>t&&(t=r),e[1].width(t-n-2*o)),e.relocate()}return e[1].updateLayout(),i.width=t,e.__final__("width",function(i){e.emit("resize",{type:i,width:t})})}},main:function(t,e){t[0].append([t[2]=newDiv("_arrow"),t[1]=Std.ui("widget",{className:"_client",initSize:!1,initBoxSize:!1,tabIndex:null})]),e.arrow||t[2].hide(),t.call_opts(["side"])},m:{rule:{content:"html"},html:{create:function(t){var e=t.children(),i=t.attr("std-content");if(Std.mold.or("html iframe url selector",i))this[i](t.trimHTML());else if("layout"===i){if(e&&e.length>0){var o=e[0].attr("std-ui");isString(o)&&Std.ui(o)&&Std.ui.build(e[0],!1)}}else this.html(t.html())}}}}),Std.plugin.module("ToolTip",{e:{delegate:null,side:"top-center",event:null,trigger:"hover",renderTo:"body",showDelay:50,hideDelay:50,spacing:5,duration:100,follow:!1,autoHide:!0,autoAdjust:!0},h:{timer:null,lastTarget:null},i:{removeToolTip:function(){var t=this,e=t._tooltip;return e&&e.destroy(),t._tooltip=null,t._docMove&&Std.dom(t.owner).off("mousemove",t._docMove),t._docPress&&Std.dom(document).off("mousedown",t._docPress),t},destroy:function(){var t=this;return t.clearTimer(),t.removeToolTip(),t._currentTarget&&(t._currentTarget=null),isFunction(t._un)&&t._un(),t}},j:{spacing:function(t){return this.opt("spacing",t)},iframe:function(t){return this.opt("iframe",t,function(){this._tooltip&&this._tooltip.iframe(t)})},html:function(t){return this.opt("html",t,function(){this._tooltip&&this._tooltip.html(t)})},url:function(t){return this.opt("url",t,function(){this._tooltip&&this._tooltip.url(t)})},selector:function(t){return this.opt("selector",t,function(){this._tooltip&&this._tooltip.selector(t)})},layout:function(t){return this.opt("layout",t,function(){this._tooltip&&this._tooltip.layout(t)})},update:function(){var t=this;return t._update&&t._update(),t},clearTimer:function(){var t=this;return null!==t._timer&&(clearTimeout(t._timer),t._timer=null),t},lastTarget:function(){return this._lastTarget}},k:function(t,e,i){var o=Std.dom(i),n=0,r=0,a=0,s=null,u=e.follow,l=e.trigger,h=Std.dom(document),d=0,c=0,f=!1,p=null,m=0,g=0,v=null,_=!1,w=0,b=0,S=!1,T=0,y=0,x=0,z="",P=t._docMove=function(t){n=t.pageX,r=t.pageY,u&&O()},H=t._docPress=function(t){s&&s[0].contains(t.target)||!p||p.contains(t.target)||(I(),h.off("mousedown",H),f=!1)},C=function(){s&&s.visible()&&(a=e.spacing,w=s.width(),b=s.height(),T=s.arrowWidth(),y=s.arrowHeight(),x=s.opts.arrowOffset)},N=function(t,e){var i=0;return 0>t?i=1:t+b>c?i=3:0>e?i=4:e+w>d&&(i=2),i},D=function(){var i={renderTo:e.renderTo,css:{position:"absolute",left:0,top:0,opacity:0}};return Std.each("className theme arrow arrowOffset boxShadow side width height contentPadding renderTo url html iframe layout selector",function(t,o){o in e&&(i[o]=e[o])}),s=t._tooltip=Std.ui("ToolTip",i)},L=function(){D().on({load:function(e){C(),O(),t.emit("load",e)},sideChange:function(e){C(),t.emit("sideChange",e)},mouseenter:function(){S=!0},mouseleave:function(){S=!1,"hover"==l&&e.autoHide&&I()}}).visible(!1),t.emit("render",s)},k=function(){z=e.side,d=h.width(),c=h.height(),e.autoHide&&!f&&(f=!0,h.on("mousedown",H)),t.clearTimer()._timer=setTimeout(function(){s?s[0].appendTo(e.renderTo):L(),s.show().side(z)[0].css({zIndex:Std.ui.status.zIndex+1}).animateTo({opacity:1},e.duration),u&&h.on("mousemove",P),C(),O(),t.emit("visible",!0)},e.showDelay)},I=function(){t.clearTimer()._timer=setTimeout(function(){s&&("hover"!=l||!S&&!_||u)&&(s[0].animateTo({opacity:0},e.duration,function(){s.hide(),s[0].detach()}),u&&h.off("mousemove",P),t.emit("visible",!1))},e.hideDelay)},W=function(t,e){var i=0;return"top"==t?i=(u?r-b:v.y-b)-a:"bottom"==t?i=(u?r:v.y+g)+a:("left"==t||"right"==t)&&("top"==e?i=u?r-y/2-x:v.y:"center"==e?i=u?r-b/2:v.y+(g-b)/2:"bottom"==e&&(i=u?r-b+y/2+x:v.y+g-b)),i},j=function(t,e){var i=0;return"top"==t||"bottom"==t?"left"==e?i=u?n-~~(T/2)-x:v.x:"center"==e?i=u?n-w/2:v.x+(m-w)/2:"right"==e&&(i=u?n-w+T/2+x:v.x+m-w):"left"==t?i=(u?n-w:v.x-w)-a:"right"==t&&(i=(u?n:v.x+m)+a),i},M=function(t,e,i,o,n,r,a){var u="left"===e||"right"===e,l="top"===e||"bottom"===e;1===t?"top"===e?e=1==a?"right":"bottom":u&&(i="top"):2===t?"right"===e?e=1==a?"bottom":"left":l&&(i="right"):3===t?"bottom"===e?e=1==a?"left":"top":u&&(i="bottom"):4===t&&("left"===e?e=1==a?"top":"right":l&&(i="left")),1==a&&(i="center"),s.side(z=e+"-"+i),t=N(o=W(e,i),n=j(e,i)),0==t?s.move(n,o):++r<12&&M(t,e,i,o,n,r,1==a?0:++a)},O=function(){var t=e.side.split("-"),i=t[0],o=t[1],n=e.autoAdjust;if(s){var r=W(i,o),a=j(i,o),u=0;s[0].css("visibility","hidden"),0!=(u=N(r,a))&&n?M(u,i,o,r,a,0,0):(e.side!==z&&s.side(z=e.side),s.move(a,r)),s[0].removeStyle("visibility")}},B=function(e,i){v=this.offset(),m=this.offsetWidth(),g=this.offsetHeight(),"focus"!==l&&(n=e.pageX,r=e.pageY),s&&s.visible()&&!this.not(p)||k(),this.not(p)&&t.emit("targetChange",t._lastTarget=this),p=this,isFunction(i)&&i.call(p,e)},R=function(i,n){var r=[i],a=e.delegate;isString(a)&&r.push(a),r.push(function(t){B.call(this,t,n)}),o.on.apply(o,r),t._un=function(){o.off.apply(o,r)}};"none"===l?B.call(o,e.event):"focus"===l?R("focusin"):"click"===l?R(l):"hover"===l&&R("mouseenter",function(){e.autoHide&&this.once("mouseleave",function(){_=!1,I()})}),t._update=function(){v=p.offset(),m=p.offsetWidth(),g=p.offsetHeight(),s&&(w=s.width(),b=s.height(),O())}}});