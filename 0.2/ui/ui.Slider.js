/**
    Std UI Kit Library
    http://ui.stdjs.com
    model: ui.Slider
	module: VSlider,HSlider
*/
Std.model("ui.Slider",{parent:"widget",c:"dragStart dragStop change",e:{min:0,max:100,value:0,color:"#5FA8DB",defaultClass:"StdUI_Slider",text:"",textTheme:"default",handleWidth:18,handleHeight:18},g:{init_boxSize:function(){var e=this;e.handleBoxSize=e.DOMMap.handle.boxSize()},render:function(){var e=this,t=e.opts;e.DOMMap.handle.css({width:t.handleWidth-e.handleBoxSize.width,height:t.handleHeight-e.handleBoxSize.height}),e.call_opts("color"),e.on("resize",e.refresh),e.refresh(),e.initDrag(),e.initEvents()}},n:{initEvents:function(){var e=this,t=!1;e[0].focussing(function(){this.addClass("focused"),t===!1&&(t=!0,e.initKeyboard(),e[0].unselect())},function(){this.removeClass("focused")})},initKeyboard:function(){var e=this;return e.on("keydown",function(t){if(e.enable())switch(t.keyCode){case 37:case 38:e.value(e.value()-1);break;case 39:case 40:e.value(e.value()+1)}})},initDrag:function(){var e,t,i,n,a=this,o=a.opts,h=0,r=0,d=Std.dom(document),l=function(l){a.enable()&&1===l.which&&(isEmpty(a.text())||(u(),n=a.DOMMap.handle.plugin("ToolTip",{event:l,trigger:"none",arrowOffset:0,autoHide:!1,theme:o.textTheme})),e=a[0].offset(),"horizontal"===a._direction?(t="pageX",i="x",r=o.handleWidth,h=a.width()-a.boxSize.width):"vertical"===a._direction&&(t="pageY",i="y",r=o.handleHeight,h=a.height()-a.boxSize.height),d.on("mousemove",s(l)||s),a.emit("dragStart"),l.preventDefault())},s=function(d){var l=d[t]-e[i],s=0;"pageX"===t?s=o.min+Math.round((l-r/2)/(h-r)*(o.max-o.min)):"pageY"===t&&(s=o.min+Math.round((h-l-r/2)/(h-r)*(o.max-o.min))),a.value(s),n&&n.html(sprintf(a.text(),a.value(),o.min,o.max))&&n.update()},u=function(){n&&(a.DOMMap.handle.removePlugin("ToolTip"),n=null)};a[0].mouse({down:l,up:function(){u(),d.off("mousemove",s),a.enable()&&a.emit("dragStop")}})}},i:{updateProgress:function(e){var t=this;switch(t._direction){case"horizontal":t.DOMMap.progress.width(e);break;case"vertical":t.DOMMap.progress.height(e)}return t},updateValue:function(e){var t=this,i=t.opts,n=0,a=0,o=0,h="",r=null,d=i.max-i.min,l=t._direction;return"horizontal"===l?(n=t.width(),h="left",a=t.boxSize.width,o=i.handleWidth,r=Math.round((n-a-o)/d*(e-i.min)),t.DOMMap.handle.css(h,r)):"vertical"===l&&(n=t.height(),h="top",a=t.boxSize.height,o=i.handleHeight,r=Math.round((n-a-o)/d*(e-i.min)),t.DOMMap.handle.css(h,(n-a-o)/d*(d-e-i.min))),t.updateProgress(r+o/2),t.emit("change",i.value=e)}},j:{text:function(e){return this.opt("text",e)},refresh:function(){return this.value(this.opts.value)},min:function(e){return this.opt("min",e,function(){this.refresh()})},max:function(e){return this.opt("max",e,function(){this.refresh()})},color:function(e){return this.opt("color",e,function(){this.DOMMap.progress.css("background",e)})},range:function(e,t){var i=this,n=i.opts;return void 0===e?{min:n.min,max:n.max}:(n.min=e,n.max=t,i)},value:function(e){var t=this,i=t.opts;return void 0===e?i.value:((e=int(e))<i.min?e=i.min:e>i.max&&(e=i.max),t.updateValue(e))}},k:function(e,t,i){var n=e.DOMMap={};i.addClass("_"+e._direction).append([n.client=newDiv("_client").append(n.progress=newDiv("_progress")),n.handle=newDiv("_handle").attr("tabindex",1)])},m:{rule:{content:"value"},html:{create:function(e){this.value(~~e.html())}}}}),Std.ui.module("HSlider",{a:"ui.Slider",e:{level:3,height:22},h:{direction:"horizontal"},g:{height:function(){var e=this,t=e.opts,i=e.DOMMap,n=e.height();if(e.handleBoxSize){var a=t.handleHeight-e.handleBoxSize.height;i.handle.css({top:(n-a)/2})}i.client.css("top",Math.round((n-i.client.height())/2))}}}),Std.ui.module("VSlider",{a:"ui.Slider",e:{level:3,width:22,fixedWidth:!0},h:{direction:"vertical"},g:{width:function(){var e=this,t=e.opts,i=e.DOMMap,n=e.width();if(e.handleBoxSize){var a=t.handleWidth-e.handleBoxSize.width;i.handle.css({left:(n-a)/2})}i.client.css("left",Math.round((n-i.client.width())/2))}}});