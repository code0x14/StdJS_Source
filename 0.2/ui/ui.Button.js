/**
    Std UI Kit Library
    http://ui.stdjs.com
	module: Button,ToolButton,ButtonGroup,ToolButtonGroup
*/
Std.ui.module("Button",{nodeName:"a",b:"widget",c:"checked mousedown mouseup click press longpress focus blur cellClick",e:{level:2,text:"Button",href:"",icon:null,cells:null,align:"center",theme:"default",target:"",defaultClass:"StdUI_Button",focusedClass:"focused",checkable:!1,checked:!1,toggleable:!0,styleType:"text",minWidth:16,minHeight:16,iconWidth:18,iconHeight:18,cellWidth:18,cellSpacing:5,width:"auto",height:"auto"},h:{fixedTableLayout:!1},g:{render:function(){{var t=this;t.opts}t.initEvents(),t.initMouse()},width:function(t){var e=this,i=e.opts,n=e.boxSize,o=n.width,c=n.extraWidth,s=e.DOMMap,r=e.DOMTreeLevel,a=s.boxTable,u=s.mainTable;if(e._fixedTableLayout&&(r>1?a.removeStyle("width tableLayout"):3===r&&u.removeStyle("width tableLayout"),e._fixedTableLayout=!1),r>1&&isNumber(t))if(2===r)a.width()>t-o-c&&(a.css({width:t-o-c,tableLayout:"fixed"}),e._fixedTableLayout=!0);else if(3===r&&(u.width()>t-o-c&&(u.css("tableLayout","fixed"),e._fixedTableLayout=!0),u.css("width",t-o-c),a.width()>t-o-c)){var l=Std.count(e._cells)*(i.cellWidth+i.cellSpacing),d=u.width()-l;a.css({width:d,tableLayout:"fixed"}),e._fixedTableLayout=!0}},height:function(t){var e=this,i=e.opts,n=e.boxSize,o=e.DOMMap,c=e.DOMTreeLevel;1===c&&isNumber(t)?(o.text&&o.text.lineHeight(t-n.height-n.extraHeight),o.icon&&o.icon.marginTop((t-n.height-n.extraHeight-e.opts.iconHeight)/2)):c>1&&(o.boxTable.height(t=isNumber(t)?t-n.height-n.extraHeight:t),i.iconHeight>t&&o.icon&&e.iconHeight(t))}},n:{initEvents:function(){var t=this,e=t.opts,i=!1;return t[0].on("focusin",function(n){var o=e.focusedClass;isEmpty(o)||t.addClass(o),t.emit("focus",n),i===!1&&(t.initKeyboard(),t.on("focusout",function(e){isEmpty(o)||t.removeClass("focused"),t.emit("blur",e)}),i=!0)}),t},initMouse:function(){var t=this,e=t.opts;return t[0].mouse({unselect:!0,down:function(e){t.emit("mousedown",e)},up:function(e){t.emit("mouseup",e)},click:function(i){return e.enable?(t.press(i).emit("click",i),void Std.func(e.click).call(t,i)):void i.preventDefault()},longpress:function(e){t.emit("longpress",e)}}),t},initKeyboard:function(){var t=this;return t[0].keyboard({classStatus:!0,keyCode:function(t){return 32===t.which||13===t.which?!0:void 0},down:function(t){t.preventDefault()},press:function(e){return t.opts.enable?(t.press(e),!1):void 0}}),t}},i:{DOMTreeLevel:1,initDOMTree:function(){var t=this,e=t.opts,i=t.DOMMap={},n=1,o=e.styleType,c=null,s=function(e){i.mainTable=newDom("table","_mainTable").append(i.mainTbody=newDom("tbody").append(i.mainTR1=newDom("tr").append([i.mainTD1=newDom("td").append(e)]))).appendTo(t[0])},r=function(t){c=i.boxTable=newDom("table","_buttonBox").append(i.boxTbody=newDom("tbody").append(t))},a=function(){return i.iconTD=newDom("td","_icon").append(i.icon=newDiv("_icon")),e.icon&&Std.icon.update(i.icon,e.icon,{width:e.iconWidth,height:e.iconHeight}),"textBesideIcon"===o&&i.iconTD.width(e.iconWidth).height(e.iconHeight),i.iconTD},u=function(){return i.text=newDom("td","_text").html(e.text)};isEmpty(t._cells)||(n=3),"text"===o?1==n?i.text=newDiv("_text").html(e.text).appendTo(t):r(i.tr1=newDom("tr").append(u())):"icon"===o?1==n?(t[0].append(i.icon=newDiv("_icon")),e.icon&&Std.icon.update(i.icon,e.icon,{width:e.iconWidth,height:e.iconHeight})):r(i.tr1=newDom("tr").append(a())):"textBesideIcon"===o?(r(i.tr1=newDom("tr").append([a(),u()])),1===n&&(n=2)):"textUnderIcon"===o&&(r([i.tr1=newDom("tr").append(a()),i.tr2=newDom("tr").append(u())]),1===n&&(n=2)),null!==c&&(3===n?(s(c),Std.each(t._cells,function(t,e){i.mainTR1.append(e)})):c.appendTo(t[0])),t.DOMTreeLevel=n,t.call_opts({align:"center"},!0)}},j:{checkable:function(t){return this.opt("checkable",t)},toggleable:function(t){return this.opt("toggleable",t)},target:function(t){return this.opt("target",t,function(){this[0].attr("target",t)})},href:function(t){var e=this;return this.opt("href",t,function(){isEmpty(t)?e[0].removeAttr("href"):(e.target(e.opts.target),e[0].attr("href",t))})},press:function(t){var e=this,i=e.opts;return Std.func(i.press).call(e,t),i.checkable&&(i.toggleable?e.checked(!i.checked):i.checked||e.checked(!0)),e.emit("press",t)},text:function(t){var e=this,i=e.DOMMap;return e.opt("text",t,function(){"icon"!==e.opts.styleType&&i.text.html(t)})},checked:function(t){var e=this;return e.checkable()?e.opt("checked",t,function(){e[0].toggleClass("checked",t),e.rendered&&e.emit("checked",t)}):void 0===t?e.opts.checked:e},icon:function(t){var e=this,i=e.opts,n=e.DOMMap;return e.opt("icon",t,function(){"text"!==i.styleType&&Std.icon.update(n.icon,t,{width:i.iconWidth,height:i.iconHeight})})},iconWidth:function(t){var e=this,i=e.DOMMap;return e.opt("iconWidth",t,function(){i.icon&&("textBesideIcon"===e.styleType()&&i.iconTD.width(t),Std.icon.update(i.icon,{width:t}))})},iconHeight:function(t){var e=this,i=e.DOMMap;return e.opt("iconHeight",t,function(){i.icon&&("textBesideIcon"===e.styleType()&&i.iconTD.height(t),Std.icon.update(i.icon,{height:t}))})},align:function(t){var e=this,i=e.DOMMap;return e.opt("align",t,function(){var n="0 auto";"left"===t?n="0":"right"===t&&(n="0 0 0 auto"),e.DOMTreeLevel>1?i.boxTable.css("margin",n):"icon"===e.styleType()&&i.icon.css("margin",n),e[0].css("text-align",t)})},cells:function(t){var e=this;return e._cells||(e._cells={}),void 0===t?e._cells:isString(t)?e._cells[t]||null:e},addCell:Std.func(function(t,e,i){var n=this,o=n.opts,c=e;return n._cells||(n._cells={}),t in n._cells?void 0:(Std.is.DOM(e)||(e=Std.icon.update(c=newDiv("_cell"),e,{width:null,height:null})),c.on("click",function(){n.emit("cellClick",{name:t,cell:c,data:e})}),n._cells[t]=newDom("td").append(c).css({width:o.cellWidth,paddingLeft:o.cellSpacing}),3!==n.DOMTreeLevel&&(n.DOMTreeLevel=3,n.rendered&&(n[0].clear(),n.initDOMTree(),n.resize("height"))),n.rendered&&(n.DOMMap.mainTR1.append(n._cells[t]),n.resize("width")),isFunction(i)&&c.on("click",i),e)},{each:[isObject,isArray]}),removeCell:Std.func(function(t){var e=this,i=e.opts.width,n=e._cells;n&&n[t]&&(n[t].remove(),delete n[t],e.rendered&&isNumber(i)&&e.width(i))},{each:["isArray isString"]}),styleType:function(t){var e=this,i=e.opts;return void 0===t?i.styleType:(e[0].clear(),e.removeClass("_"+i.styleType).addClass("_"+(i.styleType=t)),e.initDOMTree(),e)}},k:function(t,e){e.cells&&t.addCell(e.cells),e.href&&t.href(e.href),e.checked&&t.checked(!0),t.addClass("_"+e.styleType),t.styleType(e.styleType)},support:{rule:{content:"text"},html:{create:function(t){var e=t.attr("std-icon"),i=t.trimHTML();isEmpty(i)||this.text(i),isString(e)&&this.icon(e)}}}}),Std.ui.module("ToolButton",{nodeName:"a",b:"Button",e:{defaultClass:"StdUI_ToolButton",iconWidth:24,iconHeight:24,text:"ToolButton",tabIndex:null}}),Std.ui.module("ButtonGroup",{b:"widget",e:{defaultClass:"StdUI_ButtonBox",level:2,spacing:5,items:null,tabIndex:null,stretch:!0,autoExclusive:!1,width:"auto",height:"auto",align:"left",styleType:"text",buttonType:"Button",buttonTheme:"default",buttonClassName:"",buttonCheckable:!1,buttonToggleable:!0,buttonFocusedClass:"focused",minWidth:16,minHeight:16,iconWidth:18,iconHeight:18},g:{width:function(){this.rendered&&this.updateLayout()},height:function(){this.rendered&&this.updateLayout()},enable:function(t){this._items.items(function(e,i){i.enable(t)})},destroy:function(){this.clear()},render:function(){this._items.items(function(t,e){e.rendered||e.render()}),this.updateLayout()},remove:function(t){var e=this,i=null;isObject(t)&&(t=e.indexOf(t)),(isNumber(t)||isString(t))&&(i=e._items.items(t))&&(i.remove(),e._items.remove(t))}},i:{updateLayout:function(){var t=this,e=t.opts,i=t._items,n=t.spacing(),o=i.length,c=t.width(),s=0,r=0;if(e.stretch&&"auto"!==e.width)for(var a=0;o>a;a++)i._list[a].fixedWidth()&&(c-=i._list[a].width(),s++);for(a=0;o>a;a++){var u=i._list[a];0==n&&(0==a?u[0].css(["border-bottom-right-radius","border-top-right-radius"],0):a==o-1?u[0].css(["border-bottom-left-radius","border-top-left-radius"],0):u[0].css("borderRadius",0)),o-1>a&&(u[0].marginRight(n-(0===n?1:0)),r+=n),u.minHeight()>t.minHeight()&&t.minHeight(u.minHeight()),e.stretch&&("auto"!==e.height&&u.height(t.height()),"auto"===e.width||u.fixedWidth()||u.width((c-(o-s-1)*n)/(o-s)-1+(0==n&&o-1>a?1:0))),r+=u.minWidth()}return t[0].css("text-align",e.align),t.minWidth(r)}},j:{items:function(t,e){var i=this;return i._items.items(t,e)},spacing:function(t){return this.opt("spacing",t,function(){this.rendered&&this.updateLayout()})},stretch:function(t){return this.opt("stretch",t,function(){this.rendered&&this.updateLayout()})},autoExclusive:function(t){return this.opt("autoExclusive",t)},createButton:function(t){var e,i=this,n=this.opts;if(isWidget(t))e=t;else{var o=n.buttonType,c={theme:n.buttonTheme,className:n.buttonClassName,checkable:n.buttonCheckable,toggleable:n.buttonToggleable,focusedClass:n.buttonFocusedClass,styleType:n.styleType,iconWidth:n.iconWidth,iconHeight:n.iconHeight};isString(t)||isNumber(t)?c.text=t:isObject(t)&&(o=t.ui||o,Std.extend(c,t)),e=Std.ui(o,c)}return isWidget(e)&&e.parent(i).on("checked",function(t){var e=this;n.autoExclusive&&t&&i.items(function(t,i){e!==i&&"checkable"in i&&i.checkable()&&i.checked()&&i.checked(!1)})}),e||null},insert:function(t,e,i){var n=this,o=null;return n._items.insert(t,e,i,function(e){return(o=n.createButton(e))&&isString(t)&&o.name(t),o}),null===o?!1:(o[0].insertTo(n[0],i),n.rendered&&o.render()&&n.updateLayout(),n)},append:Std.func(function(t,e){this.insert(t,e)},{each:[isArray]}),clear:function(){var t=this;return t._items.items(function(t,e){e.destroy()}),t._items.clear(),t}},k:function(t,e){t._items=Std.items(),isArray(e.items)&&t.append(e.items)},support:{rule:{children:"append"},html:{nodeName:["DIV"],create:function(t){var e=this,i=e.opts,n=function(t){return Std.each("styleType iconWidth iconHeight",function(e,n){n in i&&(t[n]=i[n])}),t},o=function(t){var e=t.trimHTML(),i=n({icon:t.attr("std-icon"),action:t.attr("std-action")});return isEmpty(e)||(i.text=e),Std.extend(i,Std.options.get(t))};t.children(function(t,i){var c=null,s=i.attr("std-ui");c=isString(s)&&Std.ui(s)?Std.ui.build(i,!1,n({})):o(i),e.append(i.attr("std-name"),c)})}}}}),Std.ui.module("ToolButtonGroup",{b:"ButtonGroup",e:{buttonType:"ToolButton"}});